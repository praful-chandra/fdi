(this.webpackJsonpfdi=this.webpackJsonpfdi||[]).push([[32],{173:function(e,t,r){e.exports={wrapper:"register_wrapper__vqxz4",form:"register_form__nM-1g",formButton:"register_formButton__3M6PN"}},662:function(e,t,r){"use strict";r.r(t);var a=r(7),n=r(6),s=r.n(n),o=r(10),c=r(28),i=r(2),u=r(23),l=r(49),p=r(29),d=r(173),f=r.n(d),m=r(30),b=r(55);t.default=Object(u.b)(null,{signInUser:b.a})((function(e){var t=e.history,r=e.signInUser,n=Object(i.useState)(""),d=Object(c.a)(n,2),b=d[0],j=d[1],O=Object(i.useState)(""),g=Object(c.a)(O,2),h=g[0],v=g[1],x=Object(i.useState)(""),w=Object(c.a)(x,2),k=w[0],_=w[1],N=Object(p.useToasts)().addToast;Object(i.useEffect)((function(){j(window.localStorage.getItem("emailForRegistration"))}),[]);var y=Object(u.d)((function(e){return e})).user;Object(i.useEffect)((function(){y.token&&t.push("/"),console.log(l.a.currentUser)}),[y]);var I=function(){var e=Object(o.a)(s.a.mark((function e(a){var n,o,c,i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.prev=1,e.next=4,l.a.signInWithEmailLink(b,window.location.href);case 4:if(!e.sent.user.emailVerified){e.next=21;break}return window.localStorage.removeItem("emailForRegistration"),n=l.a.currentUser,e.next=10,n.updatePassword(h);case 10:return e.next=12,n.updateProfile({displayName:k});case 12:return e.next=14,n.getIdTokenResult();case 14:return o=e.sent,e.next=17,Object(m.a)(o.token);case 17:c=e.sent,i={token:o.token,user:c.data},r(i),Object(m.e)(c.data,t);case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(1),N(e.t0.message,{appearance:"error",autoDismiss:!0});case 26:case"end":return e.stop()}}),e,null,[[1,23]])})));return function(t){return e.apply(this,arguments)}}();return Object(a.jsx)("div",{className:f.a.wrapper,children:Object(a.jsx)("form",{onSubmit:I,children:Object(a.jsxs)("div",{className:f.a.form,children:[Object(a.jsx)("h1",{children:"Register"}),Object(a.jsx)("input",{type:"email",className:"form-control",placeholder:"E-mail",required:!0,value:b,disabled:!0}),Object(a.jsx)("input",{type:"text",className:"form-control",placeholder:"name",required:!0,value:k,onChange:function(e){return _(e.target.value)}}),Object(a.jsx)("input",{type:"password",className:"form-control",autoFocus:!0,placeholder:"Password",required:!0,value:h,onChange:function(e){return v(e.target.value)}}),Object(a.jsx)("button",{className:f.a.formButton,type:"submit",children:"Complete registration"})]})})})}))}}]);
//# sourceMappingURL=32.bcfdc3a2.chunk.js.map