{"version":3,"sources":["functions/order.function.js","pages/paymentStatus.page.jsx"],"names":["createOrder","cart","address","a","axios","post","newOrder","error","data","payNow","orderDets","paytm","getOrder","orderId","get","order","listOrders","getAllOrders","status","limit","skip","search","changeOrderStatus","newStatus","genPdf","method","responseType","file","Blob","type","fileURL","URL","createObjectURL","window","open","saveAs","paymentStatusPage","props","useState","setOrder","useEffect","query","location","split","then","handleAction","history","push","paymentStatus","title","subTitle","extra","onClick","localStorage","removeItem","renderData"],"mappings":"uXAGaA,G,OAAW,uCAAG,WAAOC,EAAMC,GAAb,eAAAC,EAAA,+EAEAC,IAAMC,KAAK,SAAU,CAAEJ,OAAMC,YAF7B,WAEjBI,EAFiB,QAITC,MAJS,yCAKdD,EAASE,MALK,gFAQhB,CAAED,MAAO,0BARO,yDAAH,yDAYXE,EAAM,uCAAG,WAAOC,GAAP,eAAAP,EAAA,+EAEEC,IAAMC,KAAK,oBAAqBK,GAFlC,WAEZC,EAFY,QAIPJ,MAJO,yCAKTI,EAAMH,MALG,gFASX,CAAED,MAAO,0BATE,yDAAH,sDAaNK,EAAQ,uCAAG,WAAOC,GAAP,eAAAV,EAAA,+EAEFC,IAAMU,IAAN,+BAAkCD,IAFhC,YAEhBE,EAFgB,SAGNA,EAAMR,MAHA,yCAIXQ,EAAMP,MAJK,gFAOb,CAAED,MAAO,0BAPI,yDAAH,sDAWRS,EAAU,uCAAG,4BAAAb,EAAA,+EAEJC,IAAMU,IAAN,WAFI,YAElBC,EAFkB,SAGRA,EAAMR,MAHE,yCAIbQ,EAAMP,MAJO,gFAOf,CAAED,MAAO,0BAPM,yDAAH,qDAWVU,EAAY,uCAAG,WAAOC,EAAOC,EAAMC,EAAKC,GAAzB,eAAAlB,EAAA,+EAENC,IAAMC,KAAK,aAAc,CAAEa,SAAOC,QAAMC,OAAKC,WAFvC,YAEpBN,EAFoB,SAGVA,EAAMR,MAHI,yCAIfQ,EAAMP,MAJS,gFAOjB,CAAED,MAAO,0BAPQ,yDAAH,4DAWZe,EAAiB,uCAAG,WAAOT,EAASK,GAAhB,eAAAf,EAAA,+EAEXC,IAAMC,KAAK,sBAAuB,CAClDQ,UACAU,UAAWL,IAJgB,YAEzBH,EAFyB,SAMfA,EAAMR,MANS,yCAOpBQ,EAAMP,MAPc,gFAUtB,CAAED,MAAO,0BAVa,yDAAH,wDAcjBiB,EAAM,uCAAG,WAAOX,GAAP,mBAAAV,EAAA,+EAEAC,IAAM,qBAAD,OAAsBS,GAAW,CACtDY,OAAQ,MACRC,aAAc,SAJE,QAEdX,EAFc,UAMJA,EAAMR,QACZoB,EAAO,IAAIC,KAAK,CAACb,EAAMP,MAAO,CAAEqB,KAAM,oBACtCC,EAAUC,IAAIC,gBAAgBL,GACpCM,OAAOC,KAAKJ,GACZG,OAAOE,OAAOL,EAAd,kBAAiCjB,EAAjC,UAVgB,yEAaX,CAAEN,MAAO,0BAbE,yDAAH,uD,6FCgBJ6B,UAvFf,SAA2BC,GAAQ,IAAD,EAELC,mBAAS,MAFJ,mBAEvBvB,EAFuB,KAEjBwB,EAFiB,KAI9BC,qBAAU,WACN,IAAIC,EAAQJ,EAAMK,SAASrB,OAC3BoB,EAAQA,EAAME,MAAM,KAAK,GAEzB/B,YAAS6B,GAAOG,MAAK,SAAApC,GACbA,EAAKD,OACLgC,EAAS/B,QAInB,IAEF,IAAMqC,EAAe,WACnBR,EAAMS,QAAQC,KAAK,oBA6DrB,OACI,8BAEShC,GA5DM,WACf,OAAOA,EAAMiC,eACT,IAAK,SACD,OAAQ,cAAC,IAAD,CACR9B,OAAO,UACP+B,MAAM,4BACNC,SAAQ,oBAAenC,EAAMF,SAC7BsC,MAAO,CACL,cAAC,IAAD,CAAQtB,KAAK,UAAwBuB,QAASP,EAA9C,yBAA2B,cAOjC,IAAK,YACD,OAAO,cAAC,IAAD,CACPI,MAAM,4BACNC,SAAQ,oBAAenC,EAAMF,SAC7BsC,MAAO,CACL,cAAC,IAAD,CAAQtB,KAAK,UAAwBuB,QAASP,EAA9C,yBAA2B,cAOjC,IAAK,SACD,OAAQ,cAAC,IAAD,CACR3B,OAAO,QACP+B,MAAM,uBACNC,SAAQ,oBAAenC,EAAMF,SAC7BsC,MAAO,CACL,cAAC,IAAD,CAAQtB,KAAK,UAAwBuB,QAASP,EAA9C,yBAA2B,cAOjC,IAAK,OAED,OADAZ,OAAOoB,aAAaC,WAAW,QACvB,cAAC,IAAD,CACRpC,OAAO,UACP+B,MAAM,+BACNC,SAAQ,oBAAenC,EAAMF,SAC7BsC,MAAO,CACL,cAAC,IAAD,CAAQtB,KAAK,UAAwBuB,QAASP,EAA9C,yBAA2B,eAanBU","file":"static/js/33.9195c75b.chunk.js","sourcesContent":["import axios from \"axios\";\r\nimport fileDownload from \"js-file-download\";\r\n\r\nexport const createOrder = async (cart, address) => {\r\n  try {\r\n    const newOrder = await axios.post(\"/order\", { cart, address });\r\n\r\n    if (!newOrder.error) {\r\n      return newOrder.data;\r\n    }\r\n  } catch (err) {\r\n    return { error: \"Internal Server Error\" };\r\n  }\r\n};\r\n\r\nexport const payNow = async (orderDets) => {\r\n  try {\r\n    const paytm = await axios.post(\"/payment/cashfree\", orderDets);\r\n\r\n    if (!paytm.error) {\r\n      return paytm.data;\r\n      // axios.post(\"https://securegw-stage.paytm.in/order/process\",paytm.data);\r\n    }\r\n  } catch (err) {\r\n    return { error: \"Internal Server Error\" };\r\n  }\r\n};\r\n\r\nexport const getOrder = async (orderId) => {\r\n  try {\r\n    let order = await axios.get(`/order/paymentStatus/${orderId}`);\r\n    if (order && !order.error) {\r\n      return order.data;\r\n    }\r\n  } catch (err) {\r\n    return { error: \"Internal Server Error\" };\r\n  }\r\n};\r\n\r\nexport const listOrders = async () => {\r\n  try {\r\n    let order = await axios.get(`/order/`);\r\n    if (order && !order.error) {\r\n      return order.data;\r\n    }\r\n  } catch (err) {\r\n    return { error: \"Internal Server Error\" };\r\n  }\r\n};\r\n\r\nexport const getAllOrders = async (status,limit,skip,search) => {\r\n  try {\r\n    let order = await axios.post(\"/order/all\", { status,limit,skip,search });\r\n    if (order && !order.error) {\r\n      return order.data;\r\n    }\r\n  } catch (err) {\r\n    return { error: \"Internal Server Error\" };\r\n  }\r\n};\r\n\r\nexport const changeOrderStatus = async (orderId, status) => {\r\n  try {\r\n    let order = await axios.post(\"/order/changeStatus\", {\r\n      orderId,\r\n      newStatus: status,\r\n    });\r\n    if (order && !order.error) {\r\n      return order.data;\r\n    }\r\n  } catch (err) {\r\n    return { error: \"Internal Server Error\" };\r\n  }\r\n};\r\n\r\nexport const genPdf = async (orderId) => {\r\n  try {\r\n    let order = await axios(`/order/geninvoice/${orderId}`, {\r\n      method: \"GET\",\r\n      responseType: \"blob\",\r\n    });\r\n    if (order && !order.error) {\r\n      const file = new Blob([order.data], { type: \"application/pdf\" });\r\n      const fileURL = URL.createObjectURL(file);\r\n      window.open(fileURL);\r\n      window.saveAs(fileURL,`ORDER - ${orderId}.pdf`); \r\n    }\r\n  } catch (err) {\r\n    return { error: \"Internal Server Error\" };\r\n  }\r\n};\r\n","import React,{useState,useEffect} from 'react'\r\nimport { Result, Button } from 'antd';\r\nimport {getOrder} from \"../functions/order.function\";\r\n\r\nfunction paymentStatusPage(props) {\r\n\r\n    const [order,setOrder] = useState(null);\r\n\r\n    useEffect(()=>{\r\n        let query = props.location.search;\r\n        query = query.split(\"=\")[1];\r\n\r\n        getOrder(query).then(data=>{\r\n            if(!data.error){\r\n                setOrder(data);\r\n            }\r\n        })\r\n\r\n    },[])\r\n\r\n    const handleAction = () =>{\r\n      props.history.push(\"/user/dashboard\");\r\n    }\r\n\r\n    \r\n    const renderData = () =>{\r\n        switch(order.paymentStatus){\r\n            case \"UnPaid\" : {\r\n                return  <Result\r\n                status=\"warning\"\r\n                title=\"The payment Didnt process\"\r\n                subTitle={`Order Id: ${order.orderId}`} \r\n                extra={[\r\n                  <Button type=\"primary\" key=\"console\" onClick={handleAction} >\r\n                    Go to Orders\r\n                  </Button>,\r\n                ]}\r\n              />\r\n            }\r\n\r\n            case \"cancelled\" :{\r\n                return <Result\r\n                title=\"The payment was Cancelled\"\r\n                subTitle={`Order Id: ${order.orderId}`} \r\n                extra={[\r\n                  <Button type=\"primary\" key=\"console\" onClick={handleAction} >\r\n                    Go to Orders\r\n                  </Button>,\r\n                ]}\r\n              />\r\n            }\r\n\r\n            case \"failed\" : {\r\n                return  <Result\r\n                status=\"error\"\r\n                title=\"The payment Failed !\"\r\n                subTitle={`Order Id: ${order.orderId}`} \r\n                extra={[\r\n                  <Button type=\"primary\" key=\"console\" onClick={handleAction} >\r\n                    Go to Orders\r\n                  </Button>,\r\n                ]}\r\n              />\r\n            }\r\n\r\n            case \"paid\" : {\r\n                window.localStorage.removeItem(\"cart\");\r\n                return  <Result\r\n                status=\"success\"\r\n                title=\"The payment was Successful !\"\r\n                subTitle={`Order Id: ${order.orderId}`} \r\n                extra={[\r\n                  <Button type=\"primary\" key=\"console\" onClick={handleAction} >\r\n                    Go to Orders\r\n                  </Button>,\r\n                ]}\r\n              />\r\n            }\r\n\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div>\r\n             {\r\n                 order && renderData()\r\n             }\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default paymentStatusPage\r\n"],"sourceRoot":""}